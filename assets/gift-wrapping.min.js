!function(){var t={4558:function(t,e,i){"use strict";i.d(e,{GQ:function(){return a},LE:function(){return r},s0:function(){return s}});var n=i(8971);i(9280);window.MinimogEvents=window.MinimogEvents||new n.Z,window._ThemeEvent=window.MinimogEvents,window.MinimogLibs.loadjs=__loadjs;const s=window.MinimogEvents,r=window.MinimogTheme||{},a=window.MinimogSettings||{};window.MinimogStrings,window.MinimogLibs},9280:function(){__loadjs=function(){var t=function(){},e={},i={},n={};function s(t,e){if(t){var s=n[t];if(i[t]=e,s)for(;s.length;)s[0](t,e),s.splice(0,1)}}function r(e,i){e.call&&(e={success:e}),i.length?(e.error||t)(i):(e.success||t)(e)}function a(e,i,n,s){var r,o,c=document,p=n.async,h=(n.numRetries||0)+1,u=n.before||t,f=e.replace(/[\?|#].*$/,""),g=e.replace(/^(css|img)!/,"");s=s||0,/(^css!|\.css$)/.test(f)?((o=c.createElement("link")).rel="stylesheet",o.href=g,(r="hideFocus"in o)&&o.relList&&(r=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(f)?(o=c.createElement("img")).src=g:((o=c.createElement("script")).src=e,o.async=void 0===p||p),!(o.onload=o.onerror=o.onbeforeload=function(t){var c=t.type[0];if(r)try{o.sheet.cssText.length||(c="e")}catch(t){18!=t.code&&(c="e")}if("e"==c){if((s+=1)<h)return a(e,i,n,s)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";i(e,c,t.defaultPrevented)})!==u(e,o)&&c.head.appendChild(o)}function o(t,i,n){var o,c;if(i&&i.trim&&(o=i),c=(o?n:i)||{},o){if(o in e)throw"LoadJS";e[o]=!0}function p(e,i){!function(t,e,i){var n,s,r=(t=t.push?t:[t]).length,o=r,c=[];for(n=function(t,i,n){if("e"==i&&c.push(t),"b"==i){if(!n)return;c.push(t)}--r||e(c)},s=0;s<o;s++)a(t[s],n,i)}(t,(function(t){r(c,t),e&&r({success:e,error:i},t),s(o,t)}),c)}if(c.returnPromise)return new Promise(p);p()}return o.ready=function(t,e){return function(t,e){t=t.push?t:[t];var s,r,a,o=[],c=t.length,p=c;for(s=function(t,i){i.length&&o.push(t),--p||e(o)};c--;)r=t[c],(a=i[r])?s(r,a):(n[r]=n[r]||[]).push(s)}(t,(function(t){r(e,t)})),o},o.done=function(t){s(t,[])},o.reset=function(){e={},i={},n={}},o.isDefined=function(t){return t in e},o}()},8971:function(t,e,i){"use strict";i.d(e,{Z:function(){return n}});class n{constructor(){this.events={}}get evts(){return Object.keys(this.events)}subscribe(t,e){return this.events[t]=this.events[t]||[],this.events[t].push(e),()=>this.unSubscribe(t,e)}unSubscribe(t,e){const i=this.events[t];if(i&&Array.isArray(i))for(let t=0;t<i.length;t++)if(i[t]===e){i.splice(t,1);break}}emit(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(this.events[t]||[]).forEach((t=>{t(...i)}))}}}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t=i(4558).GQ,e=i(4558).LE,n=i(4558).s0;class s extends HTMLElement{constructor(){super(),this.cartDrawer=document.getElementById("cart-drawer-container"),this.giftWrapId=this.dataset.giftWrapId,this.giftWrapping=this.dataset.giftWrapping,this.cartItemsSize=parseInt(this.getAttribute("cart-items-size")),this.giftWrapsInCart=parseInt(this.getAttribute("gift-wraps-in-cart")),this.itemsInCart=parseInt(this.getAttribute("items-in-cart")),this.loadingIcon=this.querySelector(".sf-gift-wrapping--loading"),this.querySelector('[name="attributes[gift-wrapping]"]').addEventListener("change",(t=>{t.target.checked?this.setGiftWrapping():this.removeGiftWrapping()})),this.cartDrawer||(1==this.cartItemsSize&&this.giftWrapsInCart>0?this.removeGiftWrapping():(this.giftWrapsInCart>0&this.giftWrapsInCart!=this.itemsInCart||this.giftWrapsInCart>0&&0==this.giftWrapping.length||0==this.giftWrapsInCart&&this.giftWrapping.length>0)&&this.setGiftWrapping())}setGiftWrapping(){this.loadingIcon.classList.add("show");const t={method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify({updates:{[this.giftWrapId]:this.itemsInCart},attributes:{"gift-wrapping":!0}})};this.updateCart(t)}removeGiftWrapping(){this.loadingIcon.classList.add("show");const t={method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify({updates:{[this.giftWrapId]:0},attributes:{"gift-wrapping":"","gift-note":""}})};this.updateCart(t)}updateCart(i){return fetch(`${t.routes.cart_update_url}`,i).then((t=>t.json())).then((i=>{this.loadingIcon.classList.remove("show"),document.body.classList.contains("template-cart")?window.location.href=t.routes.cart:e.Cart&&(e.Cart.renderNewCart(),n.emit("ON_CART_UPDATE",i))})).catch((t=>{}))}}customElements.define("m-gift-wrapping-component",s);class r extends HTMLElement{constructor(){super(),this.addEventListener("change",debounce((e=>{let i={method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify({attributes:{"gift-note":e.target.value}})};fetch(`${t.routes.cart_update_url}`,i)}),300))}}customElements.define("m-gift-note-component",r);class a extends HTMLElement{constructor(){super(),this.init()}init(){if(this.input=this.querySelector("input"),this.changeEvent=new Event("change",{bubbles:!0}),this.productId=this.dataset.productId,this.input.addEventListener("change",(()=>{window.MinimogTheme.Cart.changeItemQty({id:this.input.dataset.id,quantity:parseInt(this.input.value)})})),this.giftWrapping=e.Cart.giftWrapping,this.giftWrapping)if(this.cartItemsSize=parseInt(this.getAttribute("cart-items-size")),this.giftWrapsInCart=parseInt(this.getAttribute("gift-wraps-in-cart")),this.itemsInCart=parseInt(this.getAttribute("items-in-cart")),1==this.cartItemsSize&&this.giftWrapsInCart>0){window.MinimogTheme.Cart.changeItemQty({id:this.input.dataset.id,quantity:0});const i={method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json"}),body:JSON.stringify({attributes:{"gift-wrapping":"","gift-note":""}})};fetch(`${t.routes.cart_update_url}`,i),e.Cart.renderNewCart()}else(this.giftWrapsInCart>0&this.giftWrapsInCart!=this.itemsInCart||this.giftWrapsInCart>0&&0==this.giftWrapping.length||0==this.giftWrapsInCart&&this.giftWrapping.length>0)&&this.update()}update(){this.input.value=this.itemsInCart,this.input.dispatchEvent(this.changeEvent)}}customElements.define("m-gift-wrapping-input",a)}()}();